{"version":3,"file":"js/339.c530d0cd.js","mappings":"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","sources":["webpack://my-vue3-cli/./src/views/MyOrder.vue","webpack://my-vue3-cli/./src/components/orderModals.vue","webpack://my-vue3-cli/./src/components/orderModals.vue?e13e","webpack://my-vue3-cli/./src/views/MyOrder.vue?3315","webpack://my-vue3-cli/./src/components/MyPagination.vue","webpack://my-vue3-cli/./src/components/MyPagination.vue?003f"],"sourcesContent":["<template>\r\n  <table class=\"table mt-4\">\r\n    <thead>\r\n      <tr>\r\n        <th>購買時間</th>\r\n        <th>Email</th>\r\n        <th>購買款項</th>\r\n        <th>應付金額</th>\r\n        <th>是否付款</th>\r\n        <th>編輯</th>\r\n      </tr>\r\n    </thead>\r\n    <VueLoading v-model:active=\"isLoading\" />\r\n    <tbody>\r\n      <template v-for=\"(item, key) in orders\" :key=\"key\">\r\n        <tr v-if=\"orders.length\" :class=\"{ 'text-secondary': !item.is_paid }\">\r\n          <td>{{ formatDate(item.create_at) }}</td>\r\n          <td>\r\n            <span v-if=\"item.user\">{{ item.user.email }}</span>\r\n            <span v-else>-</span>\r\n            <!-- 如果 user 為 undefined 顯示 \"-\" -->\r\n          </td>\r\n          <td>\r\n            <ul class=\"list-unstyled\">\r\n              <li v-for=\"(product, i) in item.products\" :key=\"i\">\r\n                {{ product.product.title }} 數量：{{ product.qty }}\r\n                {{ product.product.unit }}\r\n              </li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-right\">{{ item.total ?? \"-\" }}</td>\r\n          <td>\r\n            <div class=\"form-check form-switch\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                :id=\"`paidSwitch${item.id}`\"\r\n                v-model=\"item.is_paid\"\r\n                @change=\"updatePaid(item)\"\r\n              />\r\n              <label class=\"form-check-label\" :for=\"`paidSwitch${item.id}`\">\r\n                <span v-if=\"item.is_paid\">已付款</span>\r\n                <span v-else>未付款</span>\r\n              </label>\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <button\r\n                class=\"btn btn-outline-primary btn-sm\"\r\n                @click=\"openModal(false, item)\"\r\n              >\r\n                檢視\r\n              </button>\r\n              <button\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"openDelOrderModal(item)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </template>\r\n    </tbody>\r\n  </table>\r\n  <OrderModal\r\n    :order=\"tempOrder\"\r\n    ref=\"orderModal\"\r\n    @update-paid=\"updatePaid\"\r\n  ></OrderModal>\r\n  <DelModal :item=\"tempOrder\" ref=\"delModal\" @del-item=\"delOrder\"></DelModal>\r\n  <Pagination :pages=\"pagination\" @emit-pages=\"getOrders\"></Pagination>\r\n</template>\r\n\r\n<script>\r\nimport DelModal from \"../components/DelModals.vue\";\r\nimport OrderModal from \"../components/orderModals.vue\";\r\nimport Pagination from \"../components/MyPagination.vue\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      isNew: false,\r\n      pagination: {},\r\n      isLoading: false,\r\n      tempOrder: {},\r\n      currentPage: 1,\r\n    };\r\n  },\r\n  components: {\r\n    Pagination,\r\n    DelModal,\r\n    OrderModal,\r\n  },\r\n  methods: {\r\n    async getOrders(page = 1) {\r\n      const token = Cookies.get(\"token\") || \"\"; // 取 token\r\n      if (!token) {\r\n        alert(\"尚未登入，請先登入\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`;\r\n        const res = await axios.get(url, {\r\n          headers: { Authorization: token },\r\n        });\r\n\r\n        console.log(res.data); // 印出完整回傳方便除錯\r\n\r\n        if (res.data.success) {\r\n          this.orders = res.data.orders;\r\n          this.pagination = res.data.pagination; // 分頁資料\r\n        } else {\r\n          alert(res.data.message || \"取得訂單失敗\");\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        alert(\"網路錯誤，請稍後再試\");\r\n      }\r\n    },\r\n\r\n    openModal(isNew, item) {\r\n      this.tempOrder = { ...item };\r\n      this.isNew = false;\r\n      const orderComponent = this.$refs.orderModal;\r\n      orderComponent.showModal();\r\n    },\r\n    openDelOrderModal(item) {\r\n      this.tempOrder = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    updatePaid(item) {\r\n      this.isLoading = true;\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;\r\n      const paid = {\r\n        is_paid: item.is_paid,\r\n      };\r\n      this.$http.put(api, { data: paid }).then((response) => {\r\n        this.isLoading = false;\r\n        this.getOrders(this.currentPage);\r\n        this.$httpMessageState(response, \"更新付款狀態\");\r\n      });\r\n    },\r\n    delOrder() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((response) => {\r\n        console.log(response);\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getOrders(this.currentPage);\r\n      });\r\n    },\r\n    formatDate(time) {\r\n      if (!time) return \"-\";\r\n      const date = new Date(time * 1000);\r\n      return date.toLocaleDateString();\r\n    },\r\n  },\r\n  created() {\r\n    this.getOrders();\r\n    console.log(process.env.VUE_APP_API);\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\r\n       aria-labelledby=\"exampleModalLabel\"  ref=\"modal\">\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>訂單細節</span>\r\n          </h5>\r\n          <button type=\"button\" class=\"btn-close\"\r\n                  @click=\"hideModal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <h3>用戶資料</h3>\r\n              <table class=\"table\">\r\n                <tbody v-if=\"tempOrder.user\">\r\n                  <tr>\r\n                    <th style=\"width: 100px;\">姓名</th>\r\n                    <td>{{ tempOrder.user.name }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Email</th>\r\n                    <td>{{ tempOrder.user.email }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>電話</th>\r\n                    <td>{{ tempOrder.user.tel }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>地址</th>\r\n                    <td>{{ tempOrder.user.address }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"col-md-8\">\r\n              <h3>訂單細節</h3>\r\n              <table class=\"table\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th style=\"width: 100px\">訂單編號</th>\r\n                    <td>{{ tempOrder.id }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>下單時間</th>\r\n                    <td>{{ tempOrder.create_at ? $filters.date(tempOrder.create_at) : '-' }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款時間</th>\r\n                    <td>\r\n                      <span v-if=\"tempOrder.paid_date\">\r\n                        {{ $filters.date(tempOrder.paid_date) }}\r\n                      </span>\r\n                      <span v-else>時間不正確</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <strong v-if=\"tempOrder.is_paid\" class=\"text-success\">已付款</strong>\r\n                      <span v-else class=\"text-muted\">尚未付款</span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>總金額</th>\r\n                    <td>{{ tempOrder.create_at ? formatDate(tempOrder.create_at) : '-' }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <h3>選購商品</h3>\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.id\">\r\n                    <th>\r\n                      {{ item.product.title }}\r\n                    </th>\r\n                    <td>\r\n                      {{ item.qty }} / {{ item.product.unit }}\r\n                    </td>\r\n                    <td class=\"text-end\">\r\n                      {{ $filters.currency(item.final_total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                  @click=\"hideModal\">取消\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\"\r\n                  @click=\"$emit('update-order', tempOrder)\">確認</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  name: 'orderModal',\r\n  props: {\r\n    order: {\r\n      type: Object,\r\n      default() { return {}; },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      status: {},\r\n      modal: '',\r\n      tempOrder: {\r\n        products: [],\r\n        user: null,\r\n    },\r\n      isPaid: false,\r\n    };\r\n  },\r\n  emits: ['update-product'],\r\n  inject: ['emitter'],\r\n  watch: {\r\n    order() {\r\n        // ✅ 複製 props，避免直接修改 props\r\n        this.tempOrder = { \r\n        ...this.order,\r\n        products: this.order.products || [],  // 確保 products 是陣列\r\n        user: this.order.user || null,       // 確保 user 有值或 null\r\n        };\r\n        this.isPaid = this.tempOrder.is_paid;\r\n    \r\n    },\r\n  },\r\n  methods: {\r\n    formatDate(date) {\r\n      if (!date) return '-';\r\n      return new Date(date).toLocaleString();\r\n    },\r\n    formatCurrency(value) {\r\n      if (value == null) return '-';\r\n      return new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD' }).format(value);\r\n    },\r\n  },\r\n  \r\n};\r\n</script>","import { render } from \"./orderModals.vue?vue&type=template&id=790c6007\"\nimport script from \"./orderModals.vue?vue&type=script&lang=js\"\nexport * from \"./orderModals.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./MyOrder.vue?vue&type=template&id=1322c008\"\nimport script from \"./MyOrder.vue?vue&type=script&lang=js\"\nexport * from \"./MyOrder.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <nav aria-label=\"Page navigation example\" v-if=\"pages && pages.total_pages > 0\">\r\n    <ul class=\"pagination justify-content-center\">\r\n      <!-- 上一頁 -->\r\n      <li class=\"page-item\" :class=\"{ disabled: pages.current_page <= 1 }\">\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(pages.current_page - 1)\">\r\n          &laquo;\r\n        </a>\r\n      </li>\r\n\r\n      <!-- 頁碼 -->\r\n      <li class=\"page-item\" \r\n          v-for=\"page in pages.total_pages\" \r\n          :key=\"page\"\r\n          :class=\"{ active: page === pages.current_page }\">\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a>\r\n      </li>\r\n\r\n      <!-- 下一頁 -->\r\n      <li class=\"page-item\" :class=\"{ disabled: pages.current_page >= pages.total_pages }\">\r\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(pages.current_page + 1)\">\r\n          &raquo;\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'MyPagination',\r\n    props: ['pages'],\r\n    methods: {\r\n        updatePage(page) {\r\n            this.$emit('emit-pages', page);\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./MyPagination.vue?vue&type=template&id=cb729d12\"\nimport script from \"./MyPagination.vue?vue&type=script&lang=js\"\nexport * from \"./MyPagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_1","_createVNode","_component_VueLoading","active","$data","isLoading","$event","_createElementBlock","_Fragment","_renderList","orders","item","key","length","_normalizeClass","is_paid","_toDisplayString","$options","formatDate","create_at","user","_hoisted_2","email","_hoisted_3","_hoisted_4","products","product","i","title","qty","unit","_hoisted_5","total","_hoisted_6","type","id","onChange","updatePaid","for","_hoisted_9","_hoisted_10","_hoisted_11","onClick","openModal","_hoisted_12","openDelOrderModal","_hoisted_13","_component_OrderModal","order","tempOrder","ref","onUpdatePaid","_component_DelModal","onDelItem","delOrder","_component_Pagination","pages","pagination","onEmitPages","getOrders","tabindex","role","_cache","args","_ctx","hideModal","_hoisted_7","_hoisted_8","style","name","tel","address","$filters","date","paid_date","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","currency","final_total","_hoisted_18","$emit","props","Object","default","data","status","modal","isPaid","emits","inject","watch","this","methods","Date","toLocaleString","formatCurrency","value","Intl","NumberFormat","format","__exports__","isNew","currentPage","components","Pagination","DelModal","OrderModal","page","token","Cookies","get","url","res","axios","headers","Authorization","console","log","success","alert","message","err","error","orderComponent","$refs","orderModal","showModal","delComponent","delModal","api","paid","$http","put","then","response","$httpMessageState","delete","time","toLocaleDateString","created","process","render","$props","total_pages","disabled","current_page","href","_withModifiers","updatePage"],"sourceRoot":""}